{
  "_format": "hh-sol-artifact-1",
  "contractName": "PrismPerpsVault",
  "sourceName": "contracts/PrismPerpsVault.sol",
  "abi": [
    {
      "inputs": [],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        }
      ],
      "name": "CollateralLocked",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        }
      ],
      "name": "CollateralUnlocked",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        }
      ],
      "name": "Deposit",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        }
      ],
      "name": "ProtocolReserveFunded",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        }
      ],
      "name": "Withdraw",
      "type": "event"
    },
    {
      "inputs": [],
      "name": "WEI_PER_TINYBAR",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "admin",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "internalType": "int256",
          "name": "pnl",
          "type": "int256"
        }
      ],
      "name": "applyPnL",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "depositCollateral",
      "outputs": [],
      "stateMutability": "payable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "fundProtocolReserve",
      "outputs": [],
      "stateMutability": "payable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "user",
          "type": "address"
        }
      ],
      "name": "getAvailableBalance",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "getProtocolReserve",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "user",
          "type": "address"
        }
      ],
      "name": "getTotalBalance",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        }
      ],
      "name": "lockCollateral",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "lockedCollateral",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bool",
          "name": "isLong",
          "type": "bool"
        },
        {
          "internalType": "uint256",
          "name": "collateralAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "leverage",
          "type": "uint256"
        }
      ],
      "name": "openPositionForVault",
      "outputs": [
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "perpsEngine",
      "outputs": [
        {
          "internalType": "contract PrismPerpsEngine",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "protocolReserve",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_engine",
          "type": "address"
        }
      ],
      "name": "setPerpsEngine",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "totalCollateral",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        }
      ],
      "name": "unlockCollateral",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "userCollateral",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        }
      ],
      "name": "withdrawCollateral",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }
  ],
  "bytecode": "0x608060405234801561001057600080fd5b50600080546001600160a01b03191633179055610e19806100326000396000f3fe6080604052600436106101095760003560e01c80636f75814011610095578063de4df54411610064578063de4df544146102cb578063ec446b37146102e0578063eca804b5146102e8578063f69f1e4a14610308578063f851a4401461033557600080fd5b80636f7581401461024a57806392bdf9ba14610252578063d02fd1641461027f578063d3d381931461029557600080fd5b806347a7d107116100dc57806347a7d107146101b45780634a1392ed146101d45780634ac8eb5f146101f45780636112fe2e1461020a5780636c24a76f1461022a57600080fd5b806308c99e2b1461010e578063156b02331461014157806317f174981461015a5780632364a6cb1461017c575b600080fd5b34801561011a57600080fd5b5061012e610129366004610c59565b610355565b6040519081526020015b60405180910390f35b34801561014d57600080fd5b5061012e6402540be40081565b34801561016657600080fd5b5061017a610175366004610caf565b6104d8565b005b34801561018857600080fd5b5060015461019c906001600160a01b031681565b6040516001600160a01b039091168152602001610138565b3480156101c057600080fd5b5061017a6101cf366004610caf565b6105da565b3480156101e057600080fd5b5061017a6101ef366004610caf565b6106c4565b34801561020057600080fd5b5061012e60045481565b34801561021657600080fd5b5061017a610225366004610cd9565b610893565b34801561023657600080fd5b5061012e610245366004610cf2565b610a46565b61017a610a7a565b34801561025e57600080fd5b5061012e61026d366004610cf2565b60036020526000908152604090205481565b34801561028b57600080fd5b5061012e60055481565b3480156102a157600080fd5b5061012e6102b0366004610cf2565b6001600160a01b031660009081526002602052604090205490565b3480156102d757600080fd5b5060055461012e565b61017a610b49565b3480156102f457600080fd5b5061017a610303366004610cf2565b610bf0565b34801561031457600080fd5b5061012e610323366004610cf2565b60026020526000908152604090205481565b34801561034157600080fd5b5060005461019c906001600160a01b031681565b60008083116103a45760405162461bcd60e51b81526020600482015260166024820152750436f6c6c61746572616c206d757374206265203e20360541b60448201526064015b60405180910390fd5b826103ae33610a46565b10156103f35760405162461bcd60e51b8152602060048201526014602482015273496e73756666696369656e742062616c616e636560601b604482015260640161039b565b3360009081526003602052604081208054859290610412908490610d2a565b909155505060405183815233907f2251f6a4ed7fe619e9e8ce557d05a63dd484284f9c95c9ab334f6a7707cd08009060200160405180910390a26001546040516389c81cdd60e01b8152336004820152851515602482015260448101859052606481018490526001600160a01b03909116906389c81cdd906084016020604051808303816000875af11580156104ac573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906104d09190610d3d565b949350505050565b6001546001600160a01b031633146105025760405162461bcd60e51b815260040161039b90610d56565b6001600160a01b03821660009081526003602052604090205481111561056a5760405162461bcd60e51b815260206004820152601e60248201527f496e73756666696369656e74206c6f636b656420636f6c6c61746572616c0000604482015260640161039b565b6001600160a01b03821660009081526003602052604081208054839290610592908490610d7b565b90915550506040518181526001600160a01b038316907fb4eaf47ecd4bc76248f192433e8067c96cb3e17aced42fbc47a512742fb74216906020015b60405180910390a25050565b6001546001600160a01b031633146106045760405162461bcd60e51b815260040161039b90610d56565b8061060e83610a46565b101561065c5760405162461bcd60e51b815260206004820152601e60248201527f496e73756666696369656e7420617661696c61626c652062616c616e63650000604482015260640161039b565b6001600160a01b03821660009081526003602052604081208054839290610684908490610d2a565b90915550506040518181526001600160a01b038316907f2251f6a4ed7fe619e9e8ce557d05a63dd484284f9c95c9ab334f6a7707cd0800906020016105ce565b6001546001600160a01b031633146106ee5760405162461bcd60e51b815260040161039b90610d56565b60008113156107af576001600160a01b038216600090815260026020526040812080548392839291610721908490610d2a565b92505081905550806004600082825461073a9190610d2a565b90915550506005548111156107915760405162461bcd60e51b815260206004820152601d60248201527f496e73756666696369656e742070726f746f636f6c2072657365727665000000604482015260640161039b565b80600560008282546107a39190610d7b565b9091555061088f915050565b600081121561088f5760006107c382610d8e565b6001600160a01b03841660009081526002602052604090205490915081111561082e5760405162461bcd60e51b815260206004820152601960248201527f496e73756666696369656e7420757365722062616c616e636500000000000000604482015260640161039b565b6001600160a01b03831660009081526002602052604081208054839290610856908490610d7b565b92505081905550806004600082825461086f9190610d7b565b9250508190555080600560008282546108889190610d2a565b9091555050505b5050565b600081116108d85760405162461bcd60e51b81526020600482015260126024820152710416d6f756e74206d757374206265203e20360741b604482015260640161039b565b806108e233610a46565b10156109305760405162461bcd60e51b815260206004820152601e60248201527f496e73756666696369656e7420617661696c61626c652062616c616e63650000604482015260640161039b565b336000908152600260205260408120805483929061094f908490610d7b565b9250508190555080600460008282546109689190610d7b565b909155506000905061097f6402540be40083610daa565b604051909150600090339083908381818185875af1925050503d80600081146109c4576040519150601f19603f3d011682016040523d82523d6000602084013e6109c9565b606091505b5050905080610a0c5760405162461bcd60e51b815260206004820152600f60248201526e151c985b9cd9995c8819985a5b1959608a1b604482015260640161039b565b60405183815233907f884edad9ce6fa2440d8a54cc123490eb96d2768479d49ff9c7366125a94243649060200160405180910390a2505050565b6001600160a01b0381166000908152600360209081526040808320546002909252822054610a749190610d7b565b92915050565b60003411610abe5760405162461bcd60e51b815260206004820152601160248201527026bab9ba103232b837b9b4ba10242120a960791b604482015260640161039b565b6000610acf6402540be40034610dcc565b33600090815260026020526040812080549293508392909190610af3908490610d2a565b925050819055508060046000828254610b0c9190610d2a565b909155505060405181815233907fe1fffcc4923d04b559f4d29a8bfc6cda04eb5b0d3c460751c2402c5c5cc9109c9060200160405180910390a250565b6000546001600160a01b03163314610b905760405162461bcd60e51b815260206004820152600a60248201526927b7363c9030b236b4b760b11b604482015260640161039b565b6000610ba16402540be40034610dcc565b90508060056000828254610bb59190610d2a565b90915550506040518181527f3d81e96cc009358c392f70819631d7e7fdac4c1d98ff288bfde12b3965306f9a9060200160405180910390a150565b6000546001600160a01b03163314610c375760405162461bcd60e51b815260206004820152600a60248201526927b7363c9030b236b4b760b11b604482015260640161039b565b600180546001600160a01b0319166001600160a01b0392909216919091179055565b600080600060608486031215610c6e57600080fd5b83358015158114610c7e57600080fd5b95602085013595506040909401359392505050565b80356001600160a01b0381168114610caa57600080fd5b919050565b60008060408385031215610cc257600080fd5b610ccb83610c93565b946020939093013593505050565b600060208284031215610ceb57600080fd5b5035919050565b600060208284031215610d0457600080fd5b610d0d82610c93565b9392505050565b634e487b7160e01b600052601160045260246000fd5b80820180821115610a7457610a74610d14565b600060208284031215610d4f57600080fd5b5051919050565b6020808252600b908201526a4f6e6c7920656e67696e6560a81b604082015260600190565b81810381811115610a7457610a74610d14565b6000600160ff1b8201610da357610da3610d14565b5060000390565b600082610dc757634e487b7160e01b600052601260045260246000fd5b500490565b8082028115828204841417610a7457610a74610d1456fea2646970667358221220ef91df9a40b50d79dc35a897674915930862f7ddfd1a676a02addb05bf04d1f864736f6c63430008140033",
  "deployedBytecode": "0x6080604052600436106101095760003560e01c80636f75814011610095578063de4df54411610064578063de4df544146102cb578063ec446b37146102e0578063eca804b5146102e8578063f69f1e4a14610308578063f851a4401461033557600080fd5b80636f7581401461024a57806392bdf9ba14610252578063d02fd1641461027f578063d3d381931461029557600080fd5b806347a7d107116100dc57806347a7d107146101b45780634a1392ed146101d45780634ac8eb5f146101f45780636112fe2e1461020a5780636c24a76f1461022a57600080fd5b806308c99e2b1461010e578063156b02331461014157806317f174981461015a5780632364a6cb1461017c575b600080fd5b34801561011a57600080fd5b5061012e610129366004610c59565b610355565b6040519081526020015b60405180910390f35b34801561014d57600080fd5b5061012e6402540be40081565b34801561016657600080fd5b5061017a610175366004610caf565b6104d8565b005b34801561018857600080fd5b5060015461019c906001600160a01b031681565b6040516001600160a01b039091168152602001610138565b3480156101c057600080fd5b5061017a6101cf366004610caf565b6105da565b3480156101e057600080fd5b5061017a6101ef366004610caf565b6106c4565b34801561020057600080fd5b5061012e60045481565b34801561021657600080fd5b5061017a610225366004610cd9565b610893565b34801561023657600080fd5b5061012e610245366004610cf2565b610a46565b61017a610a7a565b34801561025e57600080fd5b5061012e61026d366004610cf2565b60036020526000908152604090205481565b34801561028b57600080fd5b5061012e60055481565b3480156102a157600080fd5b5061012e6102b0366004610cf2565b6001600160a01b031660009081526002602052604090205490565b3480156102d757600080fd5b5060055461012e565b61017a610b49565b3480156102f457600080fd5b5061017a610303366004610cf2565b610bf0565b34801561031457600080fd5b5061012e610323366004610cf2565b60026020526000908152604090205481565b34801561034157600080fd5b5060005461019c906001600160a01b031681565b60008083116103a45760405162461bcd60e51b81526020600482015260166024820152750436f6c6c61746572616c206d757374206265203e20360541b60448201526064015b60405180910390fd5b826103ae33610a46565b10156103f35760405162461bcd60e51b8152602060048201526014602482015273496e73756666696369656e742062616c616e636560601b604482015260640161039b565b3360009081526003602052604081208054859290610412908490610d2a565b909155505060405183815233907f2251f6a4ed7fe619e9e8ce557d05a63dd484284f9c95c9ab334f6a7707cd08009060200160405180910390a26001546040516389c81cdd60e01b8152336004820152851515602482015260448101859052606481018490526001600160a01b03909116906389c81cdd906084016020604051808303816000875af11580156104ac573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906104d09190610d3d565b949350505050565b6001546001600160a01b031633146105025760405162461bcd60e51b815260040161039b90610d56565b6001600160a01b03821660009081526003602052604090205481111561056a5760405162461bcd60e51b815260206004820152601e60248201527f496e73756666696369656e74206c6f636b656420636f6c6c61746572616c0000604482015260640161039b565b6001600160a01b03821660009081526003602052604081208054839290610592908490610d7b565b90915550506040518181526001600160a01b038316907fb4eaf47ecd4bc76248f192433e8067c96cb3e17aced42fbc47a512742fb74216906020015b60405180910390a25050565b6001546001600160a01b031633146106045760405162461bcd60e51b815260040161039b90610d56565b8061060e83610a46565b101561065c5760405162461bcd60e51b815260206004820152601e60248201527f496e73756666696369656e7420617661696c61626c652062616c616e63650000604482015260640161039b565b6001600160a01b03821660009081526003602052604081208054839290610684908490610d2a565b90915550506040518181526001600160a01b038316907f2251f6a4ed7fe619e9e8ce557d05a63dd484284f9c95c9ab334f6a7707cd0800906020016105ce565b6001546001600160a01b031633146106ee5760405162461bcd60e51b815260040161039b90610d56565b60008113156107af576001600160a01b038216600090815260026020526040812080548392839291610721908490610d2a565b92505081905550806004600082825461073a9190610d2a565b90915550506005548111156107915760405162461bcd60e51b815260206004820152601d60248201527f496e73756666696369656e742070726f746f636f6c2072657365727665000000604482015260640161039b565b80600560008282546107a39190610d7b565b9091555061088f915050565b600081121561088f5760006107c382610d8e565b6001600160a01b03841660009081526002602052604090205490915081111561082e5760405162461bcd60e51b815260206004820152601960248201527f496e73756666696369656e7420757365722062616c616e636500000000000000604482015260640161039b565b6001600160a01b03831660009081526002602052604081208054839290610856908490610d7b565b92505081905550806004600082825461086f9190610d7b565b9250508190555080600560008282546108889190610d2a565b9091555050505b5050565b600081116108d85760405162461bcd60e51b81526020600482015260126024820152710416d6f756e74206d757374206265203e20360741b604482015260640161039b565b806108e233610a46565b10156109305760405162461bcd60e51b815260206004820152601e60248201527f496e73756666696369656e7420617661696c61626c652062616c616e63650000604482015260640161039b565b336000908152600260205260408120805483929061094f908490610d7b565b9250508190555080600460008282546109689190610d7b565b909155506000905061097f6402540be40083610daa565b604051909150600090339083908381818185875af1925050503d80600081146109c4576040519150601f19603f3d011682016040523d82523d6000602084013e6109c9565b606091505b5050905080610a0c5760405162461bcd60e51b815260206004820152600f60248201526e151c985b9cd9995c8819985a5b1959608a1b604482015260640161039b565b60405183815233907f884edad9ce6fa2440d8a54cc123490eb96d2768479d49ff9c7366125a94243649060200160405180910390a2505050565b6001600160a01b0381166000908152600360209081526040808320546002909252822054610a749190610d7b565b92915050565b60003411610abe5760405162461bcd60e51b815260206004820152601160248201527026bab9ba103232b837b9b4ba10242120a960791b604482015260640161039b565b6000610acf6402540be40034610dcc565b33600090815260026020526040812080549293508392909190610af3908490610d2a565b925050819055508060046000828254610b0c9190610d2a565b909155505060405181815233907fe1fffcc4923d04b559f4d29a8bfc6cda04eb5b0d3c460751c2402c5c5cc9109c9060200160405180910390a250565b6000546001600160a01b03163314610b905760405162461bcd60e51b815260206004820152600a60248201526927b7363c9030b236b4b760b11b604482015260640161039b565b6000610ba16402540be40034610dcc565b90508060056000828254610bb59190610d2a565b90915550506040518181527f3d81e96cc009358c392f70819631d7e7fdac4c1d98ff288bfde12b3965306f9a9060200160405180910390a150565b6000546001600160a01b03163314610c375760405162461bcd60e51b815260206004820152600a60248201526927b7363c9030b236b4b760b11b604482015260640161039b565b600180546001600160a01b0319166001600160a01b0392909216919091179055565b600080600060608486031215610c6e57600080fd5b83358015158114610c7e57600080fd5b95602085013595506040909401359392505050565b80356001600160a01b0381168114610caa57600080fd5b919050565b60008060408385031215610cc257600080fd5b610ccb83610c93565b946020939093013593505050565b600060208284031215610ceb57600080fd5b5035919050565b600060208284031215610d0457600080fd5b610d0d82610c93565b9392505050565b634e487b7160e01b600052601160045260246000fd5b80820180821115610a7457610a74610d14565b600060208284031215610d4f57600080fd5b5051919050565b6020808252600b908201526a4f6e6c7920656e67696e6560a81b604082015260600190565b81810381811115610a7457610a74610d14565b6000600160ff1b8201610da357610da3610d14565b5060000390565b600082610dc757634e487b7160e01b600052601260045260246000fd5b500490565b8082028115828204841417610a7457610a74610d1456fea2646970667358221220ef91df9a40b50d79dc35a897674915930862f7ddfd1a676a02addb05bf04d1f864736f6c63430008140033",
  "linkReferences": {},
  "deployedLinkReferences": {}
}
